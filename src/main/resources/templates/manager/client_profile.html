<!DOCTYPE html>
<html
  xmlns:th="http://www.thymeleaf.org"
  xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
  layout:decorator="layout/manager/layout"
>
  <head>
    <meta charset="utf-8" />
    <title>Cash truck</title> 
  </head> 
  <body>
        <main layout:fragment="content">
        <form method="post" th:object="${client}" th:action="@{'/clients/' + ${client.id} + '/update'}" enctype="multipart/form-data">
            <div class="alert alert-danger alert-dismissible fade show" role="alert" th:if="${errorMessage}">
                <span th:text="${errorMessage}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>

            <div class="overlay"> 
            <div class="overlay-content">
                <div class="profile-container">
                <h5 class="text-center info-card-font bold mb-5">Edit profile information</h5>
                <hr>
                <h5 class="text-center info-card-font bold mb-3">Avatar</h5> 
                <div class="container">
                    <div class="row">
                        <div class="col-md-6">
                            <div class="image-preview d-flex justify-content-center align-items-center">
                                <img id="preview" class="rounded-3 custom-back-grey mx-auto d-block mb-3" th:if="${client.avatar == null}" height="110" width="110" >
                                <img id="preview" class="rounded-3 custom-back-grey mx-auto d-block mb-3" th:if="${client.avatar != null}" th:src="'data:image/jpeg;base64,' + ${client.avatar}" height="110" width="110">
                            </div>

                            <!-- <img id="preview" class="rounded-3 custom-back-grey mx-auto d-block mb-3" height="110" width="110" src="data:image/jpeg;base64,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"/> -->

                        </div>
                        <div class="col-md-6 mt-2">
                            <div class="d-flex flex-column row justify-content-center align-items-center">
                                <label for="fileInput" class="btn custom-back-violet mb-2 small col-6">Choose photo</label>
                                <input type="file" id="fileInput" name="image" accept="image/*" class="form-control-file" onchange="previewImage(this)" style="display: none;">
                                <label type="button" class="btn btn-outline-secondary small col-6" onclick="clearImage()">Clear photo</label>
                            </div>
                        </div>
                    </div>
                </div>
                    <div class="d-flex justify-content-center">
                        <div>
                            <p th:text="${user.role}"></p>
                        </div>
                    </div>
                <script>
                    function previewImage(input) {
                        var preview = document.getElementById('preview');
                        var uploadedImage = document.getElementById('uploadedImage');
                        var file = input.files[0];
                
                        if (file) {
                            var reader = new FileReader();
                
                            reader.onload = function (e) {
                                preview.src = e.target.result;
                            }
                
                            reader.readAsDataURL(file);
                            // Show the preview image and hide the uploaded image
                            preview.style.display = 'block';
                            uploadedImage.style.display = 'none';
                        } 
                    }
                
                    function clearImage() {
                        var preview = document.getElementById('preview');
                        var uploadedImage = document.getElementById('uploadedImage');
                        var fileInput = document.querySelector('.form-control-file');
                        preview.src = "";
                        fileInput.value = ""; 
                    }
                    
                </script>
                <hr>
                <h5 class="text-center info-card-font bold mb-5">Profile information</h5>
                <div class="row mb-4">
            <div class="col">
                <div class="profile-atribute">First name</div> 
                    <div class="form-outline">
                        <input id="firstName" type="text" placeholder="First Name" class="form-control" th:field="*{firstName}"  required/>
                        <small th:if="${#fields.hasErrors('firstName')}"
                        th:errors="*{firstName}"
                        th:text="${#strings.listJoin(#fields.errors('firstName'), ', ')}" class="text-danger">
                            Please provide a valid name.
                        </small>
                    </div>
            </div>
            <div class="col">
                <div class="profile-atribute">Last Name</div>
                <div class="form-outline">
                    <input id="lastName" type="text" class="form-control" th:field="*{lastName}" placeholder="Last name" required>
                    <small th:if="${#fields.hasErrors('lastName')}"
                    th:errors="*{lastName}"
                    th:text="${#strings.listJoin(#fields.errors('lastName'), ', ')}" class="text-danger">
                        Please provide a valid card number.
                    </small>
                </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col">
                <div class="profile-atribute">Email</div> 
                    <div class="form-outline">
                        <input id="email" type="text" th:field="*{email}" placeholder="Email" class="form-control"   required/>
                        <small th:if="${#fields.hasErrors('email')}"
                        th:errors="*{email}"
                        th:text="${#strings.listJoin(#fields.errors('email'), ', ')}" class="text-danger">
                            Please provide a valid email.
                        </small>
                    </div>
            </div>
            <div class="col">
                <div class="profile-atribute">Password</div> 
                    <div class="form-outline">
                        <input id="password" type="text" th:field="*{password}" placeholder="Password" class="form-control" required/>
                        <small th:if="${#fields.hasErrors('password')}"
                        th:errors="*{password}"
                        th:text="${#strings.listJoin(#fields.errors('password'), ', ')}" class="text-danger">
                            Please provide a valid password.
                        </small>
                    </div>
            </div>
        </div>
        <div class="row mb-4">
            <div class="col">
                <div class="profile-atribute">Language</div> 
                    <div class="form-outline">
                        <input id="language" type="text" th:field="*{language}" placeholder="Language" class="form-control"/>
                        <small th:if="${#fields.hasErrors('language')}"
                        th:errors="*{language}"
                        th:text="${#strings.listJoin(#fields.errors('language'), ', ')}" class="text-danger">
                            Please provide a valid language.
                        </small>
                    </div>
            </div>
            <div class="col">
                <div class="profile-atribute">Country</div>
                <div class="form-outline">
                    <input id="country" type="text" class="form-control" th:field="*{country}" placeholder="Country">
                    <small th:if="${#fields.hasErrors('country')}"
                    th:errors="*{country}"
                    th:text="${#strings.listJoin(#fields.errors('country'), ', ')}" class="text-danger">
                        Please provide a valid country.
                    </small>
                </div>
            </div>
        </div>


    <div class="row mb-4">
        <div class="col-6">
            <div class="profile-atribute">Phone Number</div>
            <div class="form-outline">
                <input id="phoneNumber" type="text" class="form-control" th:field="*{phoneNumber}" placeholder="Phone number">
                <small th:if="${#fields.hasErrors('phoneNumber')}"
                th:errors="*{phoneNumber}"
                th:text="${#strings.listJoin(#fields.errors('phoneNumber'), ', ')}" class="text-danger">
                    Please provide a valid phone number.
                </small>
            </div>
        </div>
    </div>


        <div class="row mb-4 ">
            <div class="col justify-content-end">
                    <button class= "btn custom-back-violet mt-2" type="submit" style="width: 160px;">Update</button>
            </div>
            <div class="col">  
                <a th:href="@{'/clients/' + ${client.id}}" class="btn mt-2 custom-back-grey" style="width: 160px;">Cancel</a>
            </div>
        </div>
        </div>
    </div>
</div>
</form>
</main>
</body>
</html>
